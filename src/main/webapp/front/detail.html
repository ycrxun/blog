<%
var head = {
include("/front/layout/head.html"){}
};
var body = {
include("/front/layout/header.html"){}
%>
<!--content-->
<div class="section fade-in" id="index-banner" style="display: block; opacity: 1;">
    <div class="container">
        <div class="row">
            <!-- left -->
            <div class="col s12 m12 l8">
                <article class="card-panel">
                    <div class="card-title indigo-text">
                        ${article.title!}
                        <textarea id="c_time" class="c_time hiddendiv">${article.create_time}</textarea>
                        <small id="c_time_show" class="hiddendiv"></small>
                        <small>&nbsp;浏览量：${article.hit!}</small>
                    </div>

                    <ul class="collection">
                        <li class="collection-item">
                            <div id="article_content" class="hiddendiv">
                                <textarea id="article_content_area">${article.content!}</textarea>
                            </div>
                        </li>
                    </ul>

                    <!-- reply list -->
                    <ul id="reply_list" class="collection">
                        <li class="collection-item">
                            <div class="row valign-wrapper">
                                <div class="col s2">
                                    <img src="/assets/images/xn.png" alt="" class="circle responsive-img">
                                </div>
                                <div class="col s10">
                                    <span class="black-text">
                                        <small>ycrxun 回复于 <script>document.write(new Date().format('yyyy-MM-dd hh:mm:ss'));</script></small><br/>
                                        This is a square image. Add the "circle" class to it to make it appear circular.
                                    </span>
                                </div>
                            </div>
                        </li>
                    </ul>

                    <!-- reply form -->
                    <ul class="collection">
                        <li class="collection-item">
                            <form id="reply_form" action="/article/reply/${article.id}" method="post">
                                <input type="hidden" name="reply.article_id" value="${article.id}">

                                <div class="input-field col s12 center">
                                    <i class="mdi-social-person-outline prefix"></i>
                                    <input type="text" id="reply_name" name="reply.reply_name">
                                    <label for="reply_name" class="center-align">昵称</label>
                                </div>
                                <div class="input-field col s12 center">
                                    <i class="mdi-communication-email prefix"></i>
                                    <input type="email" id="reply_email" name="reply.reply_email">
                                    <label for="reply_email">邮箱</label>
                                </div>
                                <div class="input-field col s12 center">
                                    <i class="mdi-communication-message prefix"></i>
                                    <textarea id="reply_content" length="200" name="reply.content" class="materialize-textarea"></textarea>
                                    <label for="reply_content">内容</label>
                                </div>
                                <div class="input-field col s12 left">
                                    <a class="btn btn-primary" onclick="detail.reply();">回复</a>&nbsp;
                                   <!-- <input class="btn btn-primary" type="button" onclick="detail.preview();" value="预览"/>-->
                                </div>
                                <!--<div id="reply_content">
                                    <textarea class="materialize-textarea" length="120"></textarea>
                                </div>-->
                            </form>
                        </li>
                        <!--<li class="collection-item">
                            <div id="preview_content" class="hiddendiv">div</div>
                        </li>-->
                    </ul>

                </article>

            </div>
            <!-- right -->
            <div class="col s12 m12 l4">
                <%
                include("/front/layout/right.html"){}
                %>
            </div>
        </div>
    </div>
    <a href="#top" class="btn-floating btn-large waves-effect waves-light blue right">Top</a>
</div>

<!--footer-->
<%
include("/front/layout/footer.html"){}
%>
<!--javascript-->
<script src="/assets/js/jq/jquery-1.11.3.js"></script>
<script src="/assets/materialize/js/materialize.min.js"></script>

<script src="/markdown/lib/marked.min.js"></script>
<script src="/assets/js/client.js"></script>

<script>
    $(document).ready(function () {
        console.debug("document load finished...");

        console.log("init mobile mode nav");
        $(".button-collapse").sideNav();

        layout_right.load_last_article_list();
        layout_right.load_hot_article_list();

        detail.init_time();
        detail.init_article_content();

        console.log("init text area character count...");
        $("input#reply_content").characterCounter();

        /* console.log("init editormd...");
         var md = editormd("reply_content", {
         width: "98%",
         height: 400,
         path: "/markdown/lib/",
         watch: false,
         toolbarIcons: function () {
         return editormd.toolbarModes["simple"];
         //return ["undo", "redo", "|", "bold", "hr", "|", "preview", "watch", "|", "fullscreen", "info"];
         }
         });*/
    });
</script>
<%
};
layout("/front/layout/_layout.html",{head:head,body:body}){}
%>
